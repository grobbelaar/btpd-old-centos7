{
  "startup": {},
  "config": {
    "enabled": true,
    "reload_sighup": false,
    "reload_changed_ms": 1000
  },
  "core": {
    "core_timeout_ms": 1000,
    "idle_timeout_ms": 1000,
    "rlimit_as_mb": 0,
    "disable_statistics": true,
    "nocall_callback_abort": false,
    "nocall_callback_show": true,
    "double_callback_abort": false,
    "double_callback_show": true,
    "common-workflow": {
      "wrnsize": 16,
      "maxsize": 256,
      "control_ms": 1000,
      "threads": 0,
      "debug": false,
      "cpu": []
    },
    "wfc-cpu": [7],
    "sys-cpu": [7]
  },
  "logger": {
    "enabled": true,
    "startup_priority": -1000,
    "shutdown_priority": 1000,
    "milliseconds": true,
    "limit": 100000000,
    "save_old": true,
    "stdout": "clog",
    "path": "/logs/btp-0.7/rt.log",
    "syslog": "",
    "deny": [],
    "single": true,
    "custom": {}
  },
  "workflow": [
    {
      "name": "workflow-rt5s",
      "enabled": true,
      "cpu": [],
      "statistics": {
        "disabled": false,
        "target": ""
      },
      "wrnsize": 16,
      "maxsize": 256,
      "threads": 0
    },
    {
      "name": "workflow-rt1m-",
      "enabled": true,
      "cpu": [],
      "statistics": {
        "disabled": false,
        "target": ""
      },
      "wrnsize": 32,
      "maxsize": 256,
      "threads": 0
    }
  ],
  "system-statistics": [
    {
      "name": "system-statistics1",
      "enabled": true,
      "suspend": false,
      "startup_priority": 0,
      "shutdown_priority": 0,
      "workflow": "",
      "statistics": {
        "disabled": false,
        "target": "daemon-rt5s",
        "prefix": "system-",
        "interval_ms": 1000
      }
    }
  ],

  "server-tcp": [
    {
      "name": "server-tcp1",
      "enabled": true,
      "suspend": false,
      "startup_priority": 0,
      "shutdown_priority": 0,
      "workflow": "",
      "cpu": [],
      "target": "jsonrpc-statistics1",
      "keep-alive": true,
      "threads": 1,
      "addr": "0.0.0.0",
      "port": "38000",
      "backlog": 1024,
      "max_connections": 0,
      "connection": {
        "direct_mode":true,
        "reader": {
          "sep": "\r\n",
          "bufsize": 4096,
          "maxbuf": 8192,
          "minbuf": 0,
          "maxsize": 0,
          "trimsep": true
        },
        "writer": {
          "sep": "\r\n",
          "bufsize": 8192,
          "maxbuf": 8192,
          "minbuf": 0,
          "maxsize": 0,
          "first_as_is": true
        },
        "receive_buffer_size": 0,
        "send_buffer_size": 0
      }
    }
  ],
  "server-udp": [
    {
      "name": "server-udp1",
      "enabled": true,
      "suspend": false,
      "startup_priority": 0,
      "shutdown_priority": 0,
      "workflow": "",
      "cpu": [0,1,2,3,4,5,6],
      "target": "jsonrpc-statistics1",
      "reader": {
        "sep": "\r\n",
        "bufsize": 65535,
        "maxbuf": 65535,
        "minbuf": 0,
        "maxsize": 0,
        "trimsep": true
      },
      "writer": {
        "sep": "\r\n",
        "bufsize": 65535,
        "maxbuf": 65535,
        "minbuf": 0,
        "maxsize": 0,
        "first_as_is": true
      },
      "receive_buffer_size": 64000000,
      "send_buffer_size": 0,
      "threads": 7,
      "addr": "0.0.0.0",
      "port": "38000"
    }
  ],

  "btp-rt": [
    {
      "name": "btp-rt1",
      "enabled": true,
      "suspend": false,
      "outgoing_reduced_size": 128,
      "aggregation_step_ts": 1000000,
      "resolution": "microseconds",
      "soiled_start_ts": 1000000,
      "reducer_limit": 16384,
      "reducer_levels": 16,
      "pool_size": 16,
      "hash_size": 4096,
      "targets": ["rt5s"]
    }
  ],
  
  "jsonrpc-statistics": [
    {
      "name": "jsonrpc-statistics1",
      "enabled": true,
      "suspend": false,
      "statistics": {
        "disabled": false,
        "target": "daemon-rt5s"
      },
      "target": "rt-service1",
      "enable_write_size": true,
      "enable_error_stat": true,
      "time_suffix": ".time",
      "read_size_suffix": ".rsize",
      "write_size_suffix": ".wsize",
      "request_prefix": "req:",
      "notify_prefix": "ntf:",
      "other_time": "other.time",
      "other_read_size": "other.rsize",
      "other_write_size": "other.wsize"
    }
  ],
  
  "rt-service": [
    {
      "name": "rt-service1",
      "enabled": true,
      "suspend": false,
      "workflow": "",
      "target": "btp-rt1",
      "statistics": {
        "disabled": false,
        "target": "daemon-rt5s",
        "interval_ms": 1000,
        "handler_map": ".handler_map",
        "result_queue": ".result_queue "
      },

      "allow_non_jsonrpc": false,
      "call_lifetime_ms": 60000,
      "remove_everytime": true,
      "disable_handler_map": false,
      "remove_outdated_ms": 0
    }
  ],
  
/* **************************************************************** */
  
  
  "statistics-aggregator": [
    
    {
      "name": "daemon-rt5s",
      "enabled": true,
      "suspend": false,
      "workflow": "workflow-rt5s",
      "workers": 1,
      "cpu": [],
      
      "aggregate_timeout_ms": 1000,
      "startup_ignore_ms": 10000,
      "outgoing_reduced_size": 128,
      "resolution": "microseconds",
      "aggregation_step_ts": 5000000,
      "reducer_limit": 16384,
      "reducer_levels": 16,
      "data_pool": 128,
      "targets": ["rt1m", "gateway-ag5s"],
      
      "prefixes": [
        "service~~daemon:btpd~~",
        "service~~daemon:btpd~~dd2~~",
        "script~~rt-stat.conf~~daemon:btpd~~"
      ]
    },
    
    {
      "name": "rt5s",
      "enabled": true,
      "suspend": false,
      "workflow": "workflow-rt5s",
      "cpu": [],
      "statistics":{
        "disabled":false,
        "target":"daemon-rt5s"
      },
      "resolution": "microseconds",
      "outgoing_reduced_size": 128,
      "aggregation_step_ts": 5000000,
      "reducer_limit": 640,
      "reducer_levels": 2,
      "data_pool": 128,
      "prefixes": [],
      "targets": ["rt1m", "gateway-ag5s"],
      "workers": 6,
      "aggregate_timeout_ms": 1000,
      "startup_ignore_ms": 1000
    },
    
    {
      "name": "rt1m",
      "enabled": true,
      "suspend": false,
      "workflow": "workflow-rt1m-",
      "cpu": [],
      "resolution": "microseconds",
      "outgoing_reduced_size": 128,
      "aggregate_timeout_ms": 10000,
      "startup_ignore_ms": 0,
      "aggregation_step_ts": 60000000,
      "reducer_limit": 1536,
      "reducer_levels": 2,
      "data_pool": 128,
      "prefixes": [],
      "targets": ["rt7m", "gateway-ag1m"],
      "workers": 2
    },    
    {
      "name": "rt7m",
      "enabled": true,
      "suspend": false,
      "workflow": "workflow-rt1m-",
      "cpu": [],
      "resolution": "microseconds",
      "outgoing_reduced_size": 128,
      "aggregation_step_ts": 420000000,
      "reducer_limit": 896,
      "reducer_levels": 2,
      "data_pool": 128,
      "prefixes": [],
      "targets": ["rt1h", "gateway-ag7m"],
      "workers": 1,
      "aggregate_timeout_ms": 20000,
      "startup_ignore_ms": 0
    },    
    {
      "name": "rt1h",
      "enabled": true,
      "suspend": false,
      "workflow": "workflow-rt1m-",
      "cpu": [],
      "resolution": "microseconds",
      "outgoing_reduced_size": 128,
      "aggregation_step_ts": 3600000000,
      "reducer_limit": 1024,
      "reducer_levels": 2,
      "data_pool": 128,
      "prefixes": [],
      "targets": ["rt1d", "gateway-ag1h"],
      "workers": 1,
      "aggregate_timeout_ms": 120000,
      "startup_ignore_ms": 0
    },
    
    {
      "name": "rt1d",
      "enabled": true,
      "suspend": false,
      "workflow": "workflow-rt1m-",
      "cpu": [],
      "resolution": "microseconds",
      "outgoing_reduced_size": 0,
      "aggregation_step_ts": 86400000000,
      "reducer_limit": 3072,
      "reducer_levels": 2,
      "data_pool": 128,
      "prefixes": [],
      "targets": ["gateway-ag1d"],
      "workers": 1,
      "aggregate_timeout_ms": 300000
    }
    
  ],
  
/* **************************************************************** */

  "ag-gateway": [
    {
      "name": "gateway-ag5s",
      "outgoing_target": "client-ag5s",
      "outgoing_reg": true
    },
    {
      "name": "gateway-ag1m",
      "outgoing_target": "client-ag1m",
      "outgoing_reg": true
    },
    {
      "name": "gateway-ag7m",
      "outgoing_target": "client-ag7m",
      "outgoing_reg": true
    },
    {
      "name": "gateway-ag1h",
      "outgoing_target": "client-ag1h",
      "outgoing_reg": true
    },
    {
      "name": "gateway-ag1d",
      "outgoing_target": "client-ag1d",
      "outgoing_reg": true
    }
  ],
  
/* **************************************************************** */
  
  "client-tcp": [
    {
      "name": "client-ag5s",
      "addr": "dd2",
      "port": "36000",
      "connection": {
        "reader": { "sep": "\r\n" },
        "writer": { "sep": "\r\n" }
      }
    },
    {
      "name": "client-ag1m",
      "addr": "dd2",
      "port": "36001",
      "connection": {
        "reader": { "sep": "\r\n" },
        "writer": { "sep": "\r\n" }
      }
    },
    {
      "name": "client-ag7m",
      "addr": "dd2",
      "port": "36004",
      "connection": {
        "reader": { "sep": "\r\n" },
        "writer": { "sep": "\r\n" }
      }
    },
    {
      "name": "client-ag1h",
      "addr": "dd2",
      "port": "36002",
      "connection": {
        "reader": { "sep": "\r\n" },
        "writer": { "sep": "\r\n" }
      }
    },
    {
      "name": "client-ag1d",
      "enabled": true,
      "suspend": false,
      "addr": "dd2",
      "port": "36003",
      "connection": {
        "reader": { "sep": "\r\n" },
        "writer": { "sep": "\r\n" }
      }
    }
  ]
}
